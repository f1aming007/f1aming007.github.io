# Golang 设计模式 单例模式


# 单例模式
* 单例模式宏观介绍
* 饿汉式单例模式实现思路
* 懒汉式单例模式实现推演
* Golang 单例工具 sync.Once 源码解析

<!--more-->
# 单例模式背景
* 在单例模式下， 声明一个类并保证这个类只存在全局唯一的实例供外部反复使用

单例模式的适用场景
* 一些只允许存在一个实例的类，比如全局统一的监控统计模块。
* 一些实例化很耗费资源的类，比如协程池、连接池、和第三方交互的客户端等
* 一些入参复杂的系统模块组件，比如 controller、service、dao等

## 实现模式
在单例模式的实现上， 可以分为饿汉式和懒汉式两种类型
* 饿汉式： 从一开始就完成单例的初始化工作， 以备不时只需
* 懒汉式： 贯彻佛系思想，不到逼不得已（需要被使用了），不执行单例的初始化工作


## 饿汉式单例模式
“饿” 指的是，对于单例对象而言，不论其后续有没有被使用到以及何时才会被使用到，都会在程序启动之初完成其初始化工作.

饿汉式单例模式的执行步骤
1. 单例类和构建方法声明为不可导出类型，避免被外部直接获取到
2. 在代码启动之初，酒初始化一个全局单一的实例， 作为后续所谓的“单例”
3. 暴露一个可倒出的单例获取方法，GetXXX()，用于返回这个单例对象

![](media/16912202173735.jpg)



